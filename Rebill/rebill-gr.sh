#!/bin/sh
#current_time=$("%(%m-%d-%Y %H:%M:%S)T")
#before_currenttime=$("%(%m-%d-%Y %H:%M:%S)T")
filename=$(date +"%m-%d-%Y-%H:%M")

#TransDB mySQL
sqlcmd -S 10.0.8.34,5598 -U sa  -P ReportSa1108 -d REPV2 << EOF > /home/ubuntu/rebill/rebill-${filename}.txt


SELECT RESPONSECODE,MID, count(*) from REP where MID IN ('0000002611190B6F195F') AND RESPONSECODE IN ('GR001','GR033','GR152','GR003','GR005','GR006','GR013','GR034','GR039','GR043','GR045','GR046','GR049','GR052','GR054','GR094') AND RESPONSETIMESTAMP BETWEEN DATEADD(HOUR,1,CONVERT(VARCHAR(10), GETDATE(),110)) AND DATEADD(HOUR,5,CONVERT(VARCHAR(10), GETDATE()+1,110)) GROUP BY MID, RESPONSECODE

SELECT RESPONSECODE,MID, count(*) from REP where MID IN ('0000002611190B1AB4F2') AND RESPONSECODE IN ('GR001','GR033','GR152','GR003','GR005','GR006','GR013','GR034','GR039','GR043','GR045','GR046','GR049','GR052','GR054','GR094') AND RESPONSETIMESTAMP BETWEEN DATEADD(HOUR,1,CONVERT(VARCHAR(10), GETDATE(),110)) AND DATEADD(HOUR,5,CONVERT(VARCHAR(10), GETDATE()+1,110)) GROUP BY MID, RESPONSECODE

SELECT RESPONSECODE,MID, count(*) from REP where MID IN ('000000170820E5730B0B') AND RESPONSECODE IN ('GR001','GR033','GR152','GR003','GR005','GR006','GR013','GR034','GR039','GR043','GR045','GR046','GR049','GR052','GR054','GR094') AND RESPONSETIMESTAMP BETWEEN DATEADD(HOUR,1,CONVERT(VARCHAR(10), GETDATE(),110)) AND DATEADD(HOUR,5,CONVERT(VARCHAR(10), GETDATE()+1,110)) GROUP BY MID, RESPONSECODE

SELECT RESPONSECODE,MID, count(*) from REP where MID IN ('000000230620930B10BE') AND RESPONSECODE IN ('GR001','GR033','GR152','GR003','GR005','GR006','GR013','GR034','GR039','GR043','GR045','GR046','GR049','GR052','GR054','GR094') AND RESPONSETIMESTAMP BETWEEN DATEADD(HOUR,1,CONVERT(VARCHAR(10), GETDATE(),110)) AND DATEADD(HOUR,5,CONVERT(VARCHAR(10), GETDATE()+1,110)) GROUP BY MID, RESPONSECODE

SELECT RESPONSECODE,MID, count(*) from REP where MID IN ('0000001708205E54F25C') AND RESPONSECODE IN ('GR001','GR033','GR152','GR003','GR005','GR006','GR013','GR034','GR039','GR043','GR045','GR046','GR049','GR052','GR054','GR094') AND RESPONSETIMESTAMP BETWEEN DATEADD(HOUR,1,CONVERT(VARCHAR(10), GETDATE(),110)) AND DATEADD(HOUR,5,CONVERT(VARCHAR(10), GETDATE()+1,110)) GROUP BY MID, RESPONSECODE

SELECT RESPONSECODE,MID, count(*) from REP where MID IN ('0000002306201827C8F2') AND RESPONSECODE IN ('GR001','GR033','GR152','GR003','GR005','GR006','GR013','GR034','GR039','GR043','GR045','GR046','GR049','GR052','GR054','GR094') AND RESPONSETIMESTAMP BETWEEN DATEADD(HOUR,1,CONVERT(VARCHAR(10), GETDATE(),110)) AND DATEADD(HOUR,5,CONVERT(VARCHAR(10), GETDATE()+1,110)) GROUP BY MID, RESPONSECODE

SELECT RESPONSECODE,MID, count(*) from REP where MID IN ('0000000305219E2CE4A4') AND RESPONSECODE IN ('GR001','GR033','GR152','GR003','GR005','GR006','GR013','GR034','GR039','GR043','GR045','GR046','GR049','GR052','GR054','GR094') AND RESPONSETIMESTAMP BETWEEN DATEADD(HOUR,1,CONVERT(VARCHAR(10), GETDATE(),110)) AND DATEADD(HOUR,5,CONVERT(VARCHAR(10), GETDATE()+1,110)) GROUP BY MID, RESPONSECODE

SELECT RESPONSECODE,MID, count(*) from REP where MID IN ('0000000305210B3582D2') AND RESPONSECODE IN ('GR001','GR033','GR152','GR003','GR005','GR006','GR013','GR034','GR039','GR043','GR045','GR046','GR049','GR052','GR054','GR094') AND RESPONSETIMESTAMP BETWEEN DATEADD(HOUR,1,CONVERT(VARCHAR(10), GETDATE(),110)) AND DATEADD(HOUR,5,CONVERT(VARCHAR(10), GETDATE()+1,110)) GROUP BY MID, RESPONSECODE


GO

EOF